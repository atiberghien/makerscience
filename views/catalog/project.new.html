<div class="admin">

    <div id="intro" class="intro-project-create">
        <h1>Créez une page</h1>
        <h2>pour votre projet</h2>
    </div><!-- #intro -->

    <div class="row container">

        <div class="col-md-12">

            <div id="content" class="new-project">

                <h2>Créer un projet</h2>
                <div class="introduction">
                  <p>Ce formulaire vous permet de décrire en détails votre projet. Plus vous détaillerez, plus vous donnerez envie aux membres de s'investir dans votre projet et le relayer.</p>
                  <p>Pour toute question <a href="">contacter l'équipe de Makerscience</a></p>
                </div>

                <form name="newProjectForm"
                      novalidate
                      ng-controller="MakerScienceProjectSheetCreateCtrl"
                      ng-init="submitted=false"
                      ng-submit="saveMakerscienceProject(newProjectForm.$valid)"
                      ng-class="{ 'has-error' : newProjectForm.$invalid && submitted }">
                    <div class="row">
                        <div class="col-md-12">

                            <accordion close-others="false">
                                <accordion-group is-open="true" is-disabled="true">
                                    <accordion-heading>
                                        Caractéristiques du projet
                                    </accordion-heading>
                                    <fieldset>
                                        <label>Titre du projet <span class="required">*</span></label>
                                        <input type="text"
                                               name="projectName"
                                               ng-model="projectsheet.project.title"
                                               maxlength="50"
                                               required/>
                                        <p ng-show="newProjectForm.projectName.$invalid && submitted" class="help-block">Titre du projet requis</p>

                                        <label>Sous-titre du projet <span class="required">*</span></label>
                                        <input type="text"
                                                    name="projectBaseline"
                                                    ng-model="projectsheet.project.baseline"
                                                    maxlength="100"
                                                    required/>
                                        <p ng-show="newProjectForm.projectBaseline.$invalid && submitted" class="help-block">Sous-titre du projet requise</p>
                                        <p class="help"><span class="glyphicon glyphicon-info-sign"></span> Résumez en une courte phrase votre projet</p>

                                        <label>Présentation du projet</label>
                                        <textarea ui-tinymce="tinyMceFullOptions"
                                            ng-trim="false"
                                            name="project-about"
                                            ng-model="projectsheet.project.description"
                                            rows="4">
                                        </textarea>

                                        <label><span class="glyphicon glyphicon-time"></span> Date de fin de projet  <span class="required">*</span></label>
                                        <input type="text" ng-model="projectsheet.project.end_date" />
                                        </select>

                                        <label>Localisation <span class="required">*</span></label>
                                        <input type="text"
                                               name="projectName"
                                               ng-model="projectsheet.project.title"
                                               maxlength="50"
                                               required/>
                                        <p ng-show="newProjectForm.projectName.$invalid && submitted" class="help-block">Localisation requise</p>

                                        <label>Thématiques <span class="required">*</span></label>
                                        <input type="text"
                                            name="projectBaseline"
                                            ng-model="projectsheet.project.baseline"
                                            maxlength="100"
                                            required/>

                                        <label>Publics visés <span class="required">*</span></label>
                                        <input type="text"
                                               name="projectName"
                                               ng-model="projectsheet.project.title"
                                               maxlength="50"
                                               required/>
                                        <p ng-show="newProjectForm.projectName.$invalid && submitted" class="help-block">Publics visés requis</p>

                                        <label>Formats <span class="required">*</span></label>
                                        <input type="text"
                                               name="projectName"
                                               ng-model="projectsheet.project.title"
                                               maxlength="50"
                                               required/>
                                        <p ng-show="newProjectForm.projectName.$invalid && submitted" class="help-block">Formats requis</p>
                                   </fieldset>
                                </accordion-group>

                                <accordion-group is-open="status1.open">
                                    <accordion-heading>
                                        <span>Médias</span>
                                        <button class="btn btn-primary toggle-button" ng-class="{'disabled': status1.open}"><span class="glyphicon glyphicon-plus"></span> Ajouter un média</button>
                                    </accordion-heading>
                                    <fieldset class="addPhotosVideos">
                                        <h5>Nouveau média</h5>

                                        <label>Sélectionner le type de média à ajouter</label>
                                        <tabset>
                                            <tab>
                                                <tab-heading>
                                                    <span class="glyphicon glyphicon-camera"></span>
                                                    Image
                                                </tab-heading>
                                                <div class="row">
                                                    <div class="col-md-2">
                                                        <input id="file-image" class="inputfile" type="file" />
                                                        <label for="file-image" class="btn btn-primary">Parcourir...</label>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <span class="parcourir">ou</span>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <label for="media-image">Ajouter un lien vers une image</label>
                                                        <input id="media-image" type="text" ng-model="projectsheet.project.website" placeholder="http://" />
                                                    </div>
                                                </div>
                                            </tab>
                                            <tab>
                                                <tab-heading>
                                                    <span class="glyphicon glyphicon-file"></span>
                                                    Document
                                                </tab-heading>
                                                <div class="row">
                                                    <div class="col-md-2">
                                                        <input id="file-doc" class="inputfile" type="file" />
                                                        <label for="file-doc" class="btn btn-primary">Parcourir...</label>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <span class="parcourir">ou</span>
                                                    </div>
                                                    <div class="col-md-9">
                                                        <label for="media-doc">Ajouter un lien vers un document</label>
                                                        <input id="media-doc" type="text" ng-model="projectsheet.project.website" placeholder="http://" />
                                                    </div>
                                                </div>
                                            </tab>
                                            <tab>
                                                <tab-heading>
                                                    <span class="glyphicon glyphicon-camera"></span>
                                                    Vidéo
                                                </tab-heading>
                                                <label for="media-video">Ajouter un lien vers une vidéo</label>
                                                <input id="media-video" type="text" ng-model="projectsheet.project.website" placeholder="http://" />
                                            </tab>
                                            <tab>
                                                <tab-heading>
                                                    <span class="glyphicon glyphicon-link"></span>
                                                    Site web
                                                </tab-heading>
                                                <label for="media-link">Ajouter un lien</label>
                                                <input id="media-link" type="text" ng-model="projectsheet.project.website" placeholder="http://" />
                                            </tab>
                                        </tabset>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <label for="media-title">Titre  <span class="required">*</span></label>
                                                <input type="text"
                                                  id="media-title"
                                                  name="projectName"
                                                  ng-model="projectsheet.project.title"
                                                  maxlength="50"
                                                  required/>
                                            </div>

                                            <div class="col-md-4">
                                                <p class="item-validate" ng-hide="hideControls">
                                                  <button type="button" class="btn btn-warning cancel" ng-click="status3.open = !status3.open">Annuler</button>
                                                  <button type="button" class="btn btn-primary" ng-click="addNeed(newNeed);questionTags=null">Valider</button>
                                                </p>
                                            </div>
                                        </div>
                                    </fieldset>
                                </accordion-group>

                                <accordion-group is-open="status2.open">
                                    <accordion-heading>
                                        <p>Contacts <i class="pull-right glyphicon glyphicon-chevron-down" ng-class="{'right': !status2.open}"></i></p>
                                    </accordion-heading>
                                    <fieldset class="fake-placeholder">
                                      <label><span class="glyphicon glyphicon-globe"></span> Site web</label>
                                      <input type="text" ng-model="projectsheet.project.website" />
                                      </select>

                                        <label>Pour en savoir plus</label>
                                        <textarea ui-tinymce="tinyMceFullOptions"
                                          ng-trim="false"
                                          name="question_{{$index}}"
                                          ng-model="item.answer"
                                          e-rows="4">
                                        </textarea>
                                    </fieldset>
                                </accordion-group>

                                <accordion-group is-open="status3.open">
                                    <accordion-heading>
                                        <span>Besoins</span>
                                        <button class="btn btn-primary toggle-button" ng-class="{'disabled': status3.open}"><span class="glyphicon glyphicon-plus"></span> Ajouter un besoin</button>
                                        <p class="small subtitle">Créez une discussion précisant vos besoins (idées, matériel, financement, testeurs, relais…). Elle sera affichée sur votre projet et sur le forum de discussions.</p>
                                    </accordion-heading>
                                    <fieldset class="needs needs-select">
                                        <h5>Créer une discussion pour votre besoin</h5>

                                        <label for="new-need">Titre du besoin <span class="required">*</span></label>
                                        <input type="text" id="new-need" ng-model="newNeed.title" />
                                        <p ng-show="newNeed.title.$invalid && submitted" class="help-block">Titre du besoin requis</p>
                                        <p class="help"><span class="glyphicon glyphicon-info-sign"></span> Ce titre apparaitra comme titre de discussion sur le forum</p>

                                        <label for="">Précisions sur le besoin</label>
                                        <textarea ui-tinymce="tinyMceFullOptions"
                                          ng-trim="false"
                                          ng-model="newNeed.text"
                                          name="project-need"
                                          placeholder="Décrivez votre besoin le plus précisement possible."
                                          rows="3">
                                        </textarea>

                                        <div class="row">
                                            <div class="col-md-8">
                                                <div class="need-keywords">
                                                  <div ng-controller="TagAutoCompleteCtrl">
                                                    <label>Mots-clés</label>
                                                    <tags-input ng-model="questionTags"
                                                    placeholder="Nouveau mot-clé">
                                                    <auto-complete source="loadTags($query)" template="views/base/tag_autocomplete.html"></auto-complete>
                                                  </tags-input>
                                                </div>
                                              </div>
                                            </div>

                                            <div class="col-md-4">
                                                <p class="item-validate" ng-hide="hideControls">
                                                  <button type="button" class="btn btn-warning cancel" ng-click="status3.open = !status3.open">Annuler</button>
                                                  <button type="button" class="btn btn-primary" ng-click="addNeed(newNeed);questionTags=null">Valider</button>
                                                </p>
                                            </div>
                                        </div>

                                        <ul class="list-group">
                                            <li ng-repeat="(index, need) in needs">
                                                <div class="row">
                                                  <div class="col-md-10">
                                                    <p ng-bind-html="need.title"></p>
                                                    <!-- <p ng-bind-html="need.description"></p> -->
                                                  </div>
                                                  <div class="col-md-2">
                                                    <button type="button" class="btn btn-danger" ng-click="delNeed(index)"><span class="glyphicon glyphicon-trash"></span> Supprimer</button>
                                                  </div>
                                                </div>
                                            </li>
                                        </ul>
                                    </fieldset>
                                </accordion-group>
                            </accordion>
                        </div>
                    </div><!-- .row -->

                    <p class="right" ng-hide="hideControls">
                        <button type="button" class="btn btn-warning btn-lg cancel" ui-sref="project.list">Annuler</button>
                        <!-- FIXME : set up ctrler to allow 'save as draft'  -->
                        <!-- <button type="button" class="button">Enregistrer en brouillon</button>
                        <button type="button" class="button" ng-click="submitted=true">Publier</button>
                         -->
                        <button type="submit" class="btn btn-primary btn-lg" ng-click="submitted=true;hideControls=true">Enregistrer</button>
                    </p>
                    <div class="progress" ng-show="hideControls">
                        <div ng-show="uploader.queue.length > 0" class="progress-bar" role="progressbar" ng-style="{ 'width': uploader.progress + '%' }" style="width: 0%;"></div>
                        <div ng-show="uploader.queue.length == 0" class="progress-bar" role="progressbar" ng-style="{ 'width': fake_progress + '%' }" style="width: 0%;"></div>
                    </div>
                </form>

            </div><!-- #content -->

        </div><!-- .row -->

    </div><!-- .row .container -->
</div>
