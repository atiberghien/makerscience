 <div ng-controller="CommentCtrl" ng-init="init(commentedObjectTypeName)">
    <section class="comments">

        <ul class="actions">
            <li><a ng-click=" commenting = !commenting"><span class="glyphicon glyphicon-comment"></span>Commenter</a></li>
        </ul>
        <h3>Commentaires</h3>
        <p>Partagez vos questions, vos avis, vos pistes d'améliorations</p>
        <div>
            <div class="comment" ng-repeat="comment in comments" ng-class="{'flagged' : comment.flags[0]}">
                <div class="comment-gravatar">
                    <gravatar-image ng-if="comment.user.email" data-gravatar-email="comment.user.email"
                        data-gravatar-size="40"
                        data-gravatar-rating="pg"
                        data-gravatar-default="mm"
                        data-gravatar-secure="true"
                        data-gravatar-css-class="img-circle">
                    </gravatar-image>
                </div>
                <div class="comment-content">
                    <div class="btn-group" dropdown is-open="isopen" ng-if="$root.authVars.isAuthenticated">
                        <button type="button" class="btn dropdown-toggle" dropdown-toggle>
                            <span class="glyphicon glyphicon-option-vertical"></span></button>
                        <ul class="dropdown-menu" role="menu">
                            <!-- <li><a href="">Modifier</a></li> -->
                            <li ng-if="isCommentAuthor(comment)"><a href="" ng-click="removeComment($index)">Supprimer</a></li>
                            <li><a href="" ng-click="flagComment($index)">Signaler un abus</a></li>
                        </ul>
                    </div>
                    <p class="comment-author">{{comment.user.first_name}} <strong>{{comment.user.last_name}}</strong></p>
                    <p style="word-wrap: break-word;">{{comment.comment}}</p>
                </div>
                <div class="comment-date">
                    <span class="date" am-time-ago="comment.submit_date"></span>
                </div>
            </div><!-- .comment -->
        </div>
        <!-- When adding a comment -->
            <section class="comments comments-add" ng-show="commenting">
                <div class="comment">
                    <div class="author">
                        <img ng-if="!$root.authVars.user.email" src="./img/users/user-default.png" alt="User Unknown" />
                        <gravatar-image ng-if="$root.authVars.user.email" data-gravatar-email="$root.authVars.user.email"
                            data-gravatar-size="50"
                            data-gravatar-rating="pg"
                            data-gravatar-default="mm"
                            data-gravatar-secure="true"
                            data-gravatar-css-class="img-circle">
                        </gravatar-image>
                        <p><strong>{{$root.authVars.user.first_name}} {{$root.authVars.user.last_name}}</strong><br />Job?</p>
                    </div>
                </div><!-- .comment -->

                <form id="commentform">
                    <fieldset>
                        <!-- <input type="text" ng-model="newcommentForm.text" name="comment" placeholder="Ajouter un commentaire" required/> -->
                        <textarea name="comment" ng-model="newcommentForm.text" form="commentform" placeholder="Rédiger votre commentaire..."></textarea>
                        <button class="button button-{{parentColor}}" type="submit" ng-click="postComment()" name="send">Poster</button>
                    </fieldset>
                </form>
            </section>
        <p class="{{parentColor}}"><a href="">Voir tous les commentaires</a></p>

    </section><!-- .comments -->


</div>
